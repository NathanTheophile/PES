[gd_scene load_steps=6 format=2]

[ext_resource path="res://skills/SkillScript.gd" type="Script" id=1]
[ext_resource path="res://characters/003 - Usopp/skill/Proj.tscn" type="PackedScene" id=2]
[ext_resource path="res://skills/icons/aoe.png" type="Texture" id=3]
[ext_resource path="res://characters/003 - Usopp/skill/blast.tscn" type="PackedScene" id=4]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

# targetArray = Array contendo as posições que esse feitiço atingiu
#               A célula central será contida em um Array sozinha, para fácil identificação
var skill
func effects(targetArray):
	skill = get_parent()
	var d = skill.caster.direction
	
	BattleMechanics.playAnimEntity(skill.caster, \"Attack\")
	
	yield(get_tree().create_timer(0.3),\"timeout\")
	AM.play(skill.caster.audioEX[0],{\"randp\": true})
	yield(get_tree().create_timer(0.8),\"timeout\")
	var c
	for i in targetArray:
		if i is Array:
			c = i[0]
	AM.play(skill.caster.audioEX[1],{\"randp\": true})
	yield(BattleMechanics.shootProjectile(skill.visuals[0],skill.caster.posit, c, 0.05, Vector2(0,0), Vector2(0,-30), false),\"completed\")
	
	BattleMechanics.playAnim(skill.visuals[1],c,\"over\")
	
	BattleMechanics.dmgAtAoe(targetArray, skill.base, skill.caster)
	
	AM.play(skill.caster.audioEX[4],{\"randp\": true})
	
	yield(get_tree().create_timer(0.3),\"timeout\")
			
	
	
	
"

[node name="Skill" type="Node2D"]
script = ExtResource( 1 )
skillName = "Gunpowder Star"
description = "[b]{b}[/b] [img]res://skills/sword.png[/img]"
icon1 = ExtResource( 3 )
base = 12
apCost = 1
element = 1
rangeMax = 8
sight = true
aoeShape = 1
visuals = [ ExtResource( 2 ), ExtResource( 4 ) ]
effects = SubResource( 1 )

[node name="Effects" type="Node" parent="."]

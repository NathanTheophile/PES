[gd_scene load_steps=7 format=2]

[ext_resource path="res://skills/SkillScript.gd" type="Script" id=1]
[ext_resource path="res://skills/Recursos Comuns/Excl.tscn" type="PackedScene" id=2]
[ext_resource path="res://skills/icons/debuff.png" type="Texture" id=3]
[ext_resource path="res://characters/003 - Usopp/skill/(State) Usopp Rubberband.tscn" type="PackedScene" id=4]
[ext_resource path="res://characters/003 - Usopp/skill/Shine.tscn" type="PackedScene" id=5]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

# targetArray = Array contendo as posições que esse feitiço atingiu
#               A célula central será contida em um Array sozinha, para fácil identificação
var skill
func effects(targetArray):
	skill = get_parent()
	var d = skill.caster.direction
	
	AM.play(skill.caster.audioEX[2],{\"randp\": true})
	AM.play(skill.caster.audioEX[0],{\"randp\": true})
	BattleMechanics.playAnim(skill.visuals[1],skill.caster.posit)
	BattleMechanics.playAnimEntity(skill.caster, \"Band\")
	BattleMechanics.bounceTgt(skill.caster)
	yield(get_tree().create_timer(0.6),\"timeout\")
	
	var tgt = BattleMechanics.getEntityAt(targetArray[0])
	if tgt:
		tgt.turn_to(skill.caster.direction)
		BattleMechanics.bounceTgt(tgt)
		AM.play(skill.caster.audioEX[6])
		BattleMechanics.addState(skill.states[0], tgt, skill.caster)
		BattleMechanics.playAnim(skill.visuals[0],tgt.posit)
	yield(get_tree().create_timer(0.7),\"timeout\")
	BattleMechanics.playAnimEntity(skill.caster, \"Sling Back\")
	yield(get_tree().create_timer(0.3),\"timeout\")
			
	
	
	
"

[node name="Skill" type="Node2D"]
script = ExtResource( 1 )
skillName = "Usopp Rubberband"
description = "Makes the target face Usopp and applies [b]Usopp Rubberband[/b] to it: [b]+50%[/b] [img]res://skills/sword.png[/img] to the next damage the target suffers.

This state is removed at the start of the enemy's turn if not consumed before then."
icon1 = ExtResource( 3 )
apCost = 1
element = 1
rangeMax = 2
linear = true
sight = true
cooldown = 2
visuals = [ ExtResource( 2 ), ExtResource( 5 ) ]
effects = SubResource( 1 )
states = [ ExtResource( 4 ) ]

[node name="Effects" type="Node" parent="."]

[gd_scene load_steps=5 format=2]

[ext_resource path="res://skills/SkillScript.gd" type="Script" id=1]
[ext_resource path="res://skills/icons/heal.png" type="Texture" id=2]
[ext_resource path="res://characters/001 - Luffy/(State) Well Fed.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

# targetArray = Array contendo as posições que esse feitiço atingiu
#               A célula central será contida em um Array sozinha, para fácil identificação
var skill
func effects(targetArray):
	skill = get_parent()
	
	AM.play(skill.caster.audioEX[2], {\"randp\": true})
	BattleMechanics.playAnimEntity(skill.caster, \"Lunch\")
	yield(get_tree().create_timer(0.4),\"timeout\")
	AM.play(skill.caster.audioEX[1], {\"randp\": true, \"pitch\": 1.6})
	yield(get_tree().create_timer(0.85),\"timeout\")
	AM.play(skill.caster.audioEX[5], {\"randp\": true})
	var val = round(float(skill.caster.hp) * 0.3)
	var luffy = skill.caster
	
	BattleMechanics.heal(val,skill.caster,skill.caster)
	for i in 4:
		yield(get_tree().create_timer(0.1),\"timeout\")
		AM.play(skill.caster.audioEX[7], {\"randp\": 1.8})
		
	
	yield(get_tree().create_timer(0.4),\"timeout\")
	AM.play(skill.caster.audioEX[6], {\"randp\": true})
	yield(get_tree().create_timer(1.2),\"timeout\")
	
			
	
	
	
"

[node name="Skill" type="Node2D"]
script = ExtResource( 1 )
skillName = "Lunch"
description = "[b]Heal 30% of max HP[/b].
For every [b]2%[/b] of overheal, Luffy gains  [b]+1%[/b] [img]res://skills/sword.png[/img] until the end of the combat."
icon1 = ExtResource( 2 )
apCost = 1
rangeMin = 0
rangeMax = 0
linear = true
sight = true
cooldown = 3
effects = SubResource( 1 )
states = [ ExtResource( 3 ) ]

[node name="Effects" type="Node" parent="."]

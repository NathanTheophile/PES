[gd_scene load_steps=5 format=2]

[ext_resource path="res://skills/SkillScript.gd" type="Script" id=1]
[ext_resource path="res://skills/Recursos Comuns/Hit.tscn" type="PackedScene" id=2]
[ext_resource path="res://skills/HelperWindows/Push.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

# targetArray = Array contendo as posições que esse feitiço atingiu
#               A célula central será contida em um Array sozinha, para fácil identificação
var skill
func effects(targetArray):
	skill = get_parent()

	
	BattleMechanics.playAnimEntity(skill.caster, \"Atk\")
	
	yield(get_tree().create_timer(0.3),\"timeout\")
	
	yield(BattleMechanics.push(skill.caster,skill.caster,3,skill.caster.direction),\"completed\")
	
	
	
	BattleMechanics.playAnim(skill.visuals[0], targetArray[0], false if skill.caster.direction.x == 1 or skill.caster.direction.y == -1 else true)
	
	
	var tgt = BattleMechanics.getEntityAt(targetArray[0])
	if tgt:
		BattleMechanics.dealDmg([5,\"n\"],tgt,skill.caster)
		BattleMechanics.push(tgt,skill.caster,2,skill.caster.direction)
	
	yield(get_tree().create_timer(1),\"timeout\")
"

[node name="Skill" type="Node2D"]
script = ExtResource( 1 )
skillName = "Chop Chop Bash"
apCost = 1
rangeMax = 3
linear = true
sight = true
usePerTgt = 1
tgtTypeEntity = true
visuals = [ ExtResource( 2 ) ]
effects = SubResource( 1 )
helpertext = [ ExtResource( 3 ) ]

[node name="Effects" type="Node" parent="."]
